<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Choix d'entité — OCP (mobile)</title>
    <style>
    :root{
      --card-accent: #2e7d32; /* primary green from logo */
      --muted: #9aa4ad;
      --pill-bg: rgba(255,255,255,0.12);
      --card-radius: 12px;
      --outline-weak: rgba(46,125,50,0.18);
      --outline-strong: rgba(46,125,50,0.34);
      --footer-height: 48px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f7fafc; -webkit-font-smoothing:antialiased}

    header{
      background:#fff;
      color:#09202b;
      padding:10px 12px;
      display:flex;gap:10px;align-items:center;justify-content:flex-start;
      border-bottom-left-radius: 10px;border-bottom-right-radius: 10px;
      position:sticky;top:0;z-index:50;
      align-items: center;
      text-align: center;
      border-bottom:1px solid rgba(0,0,0,0.04);
    }
    .ocplogo{height:40px;width:auto;border-radius:6px;flex:0 0 auto}
    .title{flex:1}
    .title p{margin:0;font-weight:600;font-size:13px}
    .title small{display:block;color:var(--muted);font-size:11px;margin-top:4px}

    main{max-width:980px;margin:20px auto;padding:0 10px;padding-bottom: calc(var(--footer-height) + 12px);} /* reserve space for footer */

    .entities{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
      margin-top:8px;
      justify-items:center; /* ensures single leftover items center */
    }
    


    .card{
      position:relative;display:flex;align-items:center;justify-content:center;gap:8px;
      height:85px;padding:8px;border-radius:var(--card-radius);overflow:hidden;cursor:pointer;user-select:none;
      transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease;
      border:3px solid var(--outline-strong);background:#fff;min-height:85px;width:100%;max-width:300px;
      box-shadow:0 4px 12px rgba(2,6,23,0.04);
    }

    /* force all variant cards to keep green outline (in case of visual differences) */
    .card1,.card2,.card3,.card4,.card5,.card6,.card7,.card9,.card10{border-color:var(--outline-strong)}

    /* pressed state (visual "pop out") */
    .card.pressed{transform:translateY(-6px) scale(1.04);box-shadow:0 14px 40px rgba(2,6,23,0.12);border-color:var(--outline-strong)}

    /* Lazy-load safe images, minimal filters for performance */
    .card img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transform:scale(1.02);transition:transform .35s ease,opacity .25s ease}

    /* overlay for readability */
    .card::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg, rgba(2,6,23,0.04) 30%, rgba(2,6,23,0.5) 100%);z-index:0}

    /* center label exactly in the center of the box */
    .content{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}
    .label{font-weight:800;font-size:16px;color:#fff;margin:0;text-align:center;line-height:1;text-shadow:2px 2px 4px rgba(0,0,0,0.7)}

    /* symmetrical pills centered below label */
    .sub-labels{display:flex;gap:8px;justify-content:center;align-items:center;margin-top:8px}
    .pill{background:var(--pill-bg);padding:6px 8px;border-radius:999px;font-size:12px;color:#fff;min-width:52px;text-align:center;font-weight:800}

    /* interaction states use green outlines */
    .card:focus{outline:none;border-color:var(--outline-strong);box-shadow:0 6px 18px rgba(46,125,50,0.10)}
    .card:hover{transform:translateY(-4px);border-color:var(--outline-strong);box-shadow:0 10px 30px rgba(2,6,23,0.08)}

    /* ensure :active uses pressed style on devices without pointer events */
    .card:active{transform:translateY(-6px) scale(1.04);border-color:var(--outline-strong);box-shadow:0 14px 40px rgba(2,6,23,0.12)}

    /* color variants kept but subtle so images are primary */
    .card1{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card2{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card3{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card4{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card5{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card6{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card7{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card9{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}
    .card10{background:linear-gradient(160deg,#2a7f2e,#2a7f2e)}

    /* Larger screens: 2 columns then 3 columns. Keep cards compact and centered. */
    @media(min-width:540px){
      .entities{grid-template-columns:repeat(2,1fr);gap:12px}
      .card{height:95px;width:92%;max-width:300px}
      .label{font-size:17px}
    }
    @media(min-width:920px){
      .entities{grid-template-columns:repeat(3,1fr)}
      .card{height:105px;width:86%;max-width:280px}
      .label{font-size:18px}
    }

    /* bottom-sheet style overlays for mobile (unchanged) */
    .overlay{display:none;position:fixed;inset:0;z-index:9999;background:rgba(2,6,23,0.45);align-items:center;justify-content:center;padding:12px}
    .choice-dialog{background:#fff;color:#111;padding:14px;border-radius:14px;width:100%;max-width:560px;box-shadow:0 12px 40px rgba(2,6,23,0.18)}
    .choice-title{color:var(--card-accent);font-weight:800;margin-bottom:12px;text-align:center}
    .choice-buttons{display:flex;gap:10px;justify-content:center}
    .choice-btn{flex:1;padding:12px;border-radius:9px;border:none;background:var(--card-accent);color:#fff;font-weight:800;font-size:15px}
    .choice-cancel{display:block;margin-top:12px;background:transparent;border:none;color:#666;cursor:pointer;text-decoration:underline;width:100%}

    /* sticky footer fixed to bottom for guaranteed placement */
        footer{
      position:fixed;left:0;right:0;bottom:0;height:var(--footer-height);display:flex;align-items:center;justify-content:center;background:#0b1720;color:#e6eef4;padding:0 12px;z-index:60;border-top:1px solid rgba(255,255,255,0.03)
    }

    /* make text small to avoid wrapping too much on tiny screens */
    footer small{font-size:13px}

    </style>
</head>
<body>
    <header>
    <img class="ocplogo" src="images/ocplogo.jpg" alt="OCP logo">
    <div class="title">
      <p>SBU MINING — Khouribga Integrated Platform</p>
      <small>Direction flux planification et performance — Direction port Casa</small>
    </div>
  </header>

    <main>
    <div style="text-align: center; margin-bottom: 38px;">
      <h2 style="color: #2e7d32; font-weight: 600; font-size: 22px; margin: 0; line-height: 1.3;">Veuillez choisir<br>l'entité correspondante</h2>
    </div>
    <div class="entities" role="list">

      <!-- card example: Port Casa -->
      <button class="card card1" data-entite="Port Casa" aria-label="Port Casa" role="listitem">
        <img loading="lazy" src="images/Casa_Port.jpg" alt="Vue du port de Casablanca">
        <div class="content">
          <div class="label">Port Casa</div>
            </div>
      </button>
                
      <button class="card card2" data-entite="Sidi Chennane" aria-label="Sidi Chennane" role="listitem">
        <img loading="lazy" src="images/Sidi_Chennane.jpg" alt="Sidi Chennane">
        <div class="content">
          <div class="label">Sidi Chennane</div>
            </div>
      </button>

      <button class="card card3" data-entite="Beni idir" aria-label="Beni idir" role="listitem">
        <img loading="lazy" src="images/Beni Idir.jpeg" alt="Beni Idir">
        <div class="content"><div class="label">Beni idir</div></div>
      </button>

      <button class="card card4" data-entite="Sidi Daoui" aria-label="Sidi Daoui" role="listitem">
        <img loading="lazy" src="images/Sidi_Daoui.webp" alt="Sidi Daoui">
        <div class="content"><div class="label">Sidi Daoui</div></div>
      </button>

      <button class="card card5" data-entite="DownStream" aria-label="DownStream" role="listitem">
        <img loading="lazy" src="images/DownStream.jpeg" alt="DownStream">
        <div class="content"><div class="label">DownStream</div></div>
      </button>

      <button class="card card6" data-entite="Pipeline" aria-label="Pipeline" role="listitem">
        <img loading="lazy" src="images/Pipe.jpg" alt="Pipeline">
        <div class="content"><div class="label">Pipeline</div></div>
      </button>

      <!-- Merah: center name with two sub-labels underneath -->
      <button class="card card7" id="card-merah" data-entite="Merah" aria-haspopup="dialog" aria-label="Merah" role="listitem">
        <img loading="lazy" src="images/Mine_merah.jpeg" alt="Merah">
        <div class="content">
          <div class="label">Merah</div>
          <div class="sub-labels"><span class="pill">MINE</span><span class="pill">LAV</span></div>
            </div>
      </button>

      <!-- BA: same centered layout -->
      <button class="card card9" id="card-ba" data-entite="BA" aria-haspopup="dialog" aria-label="BA" role="listitem">
        <img loading="lazy" src="images/BA_LAV.jpg" alt="BA">
        <div class="content">
          <div class="label">BA</div>
          <div class="sub-labels"><span class="pill">MINE</span><span class="pill">LAV</span></div>
            </div>
      </button>

      <button class="card card10" data-entite="F&U" aria-label="F et U" role="listitem">
        <img loading="lazy" src="images/entity10.png" alt="F & U">
        <div class="content"><div class="label">F & U</div></div>
      </button>
               
            </div>
  </main>

  <!-- bottom-sheet style overlays for mobile -->
  <div id="ba-overlay" class="overlay" role="dialog" aria-hidden="true">
    <div class="choice-dialog">
      <div class="choice-title">Choisir une sous-entité (BA)</div>
      <div class="choice-buttons">
        <button id="ba-mine" class="choice-btn">MINE</button>
        <button id="ba-lav" class="choice-btn">LAV</button>
            </div>
      <button id="ba-cancel" class="choice-cancel">Annuler</button>
            </div>
            </div>
            
  <div id="merah-overlay" class="overlay" role="dialog" aria-hidden="true">
    <div class="choice-dialog">
      <div class="choice-title">Choisir une sous-entité (Merah)</div>
      <div class="choice-buttons">
        <button id="merah-mine" class="choice-btn">MINE</button>
        <button id="merah-lav" class="choice-btn">LAV</button>
      </div>
      <button id="merah-cancel" class="choice-cancel">Annuler</button>
    </div>
        </div>

  <footer><small>&copy; 2025 OCP - Tous droits réservés.</small></footer>

  <script>
    // mobile-friendly interactions + keyboard accessibility
    document.addEventListener('click', function(e){
      const card = e.target.closest('.card[data-entite]');
      if(!card) return;
      const label = (card.getAttribute('data-entite') || '').trim();

      if(card.id === 'card-ba'){
        showOverlay('ba-overlay'); return;
      }
      if(card.id === 'card-merah'){
        showOverlay('merah-overlay'); return;
      }

      // routing logic kept from original
      let target = 'Port/login.php';
      const l = label.toLowerCase();
      if(l.includes('beni')) target = 'Beni idir/login.php';
      else if(l.includes('pipeline')) target = 'Pipeline/login.php';
      else if(l.includes('port')) target = 'Port/login.php';

      window.location.href = `${target}?location=${encodeURIComponent(label)}`;
    });

    // improve keyboard support for accessibility
    document.querySelectorAll('.card').forEach(c=>{
      c.tabIndex = 0;
      c.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); c.click(); }
      });
    });

    function showOverlay(id){
      const el = document.getElementById(id);
      if(!el) return;el.style.display='flex';el.setAttribute('aria-hidden','false');
      // focus first button for quick access
      const btn = el.querySelector('.choice-btn'); if(btn) btn.focus();
    }
    function hideOverlay(id){const el=document.getElementById(id); if(!el) return; el.style.display='none'; el.setAttribute('aria-hidden','true');}

    document.getElementById('ba-mine').addEventListener('click', ()=> window.location.href='Port/login.php?location=BA-MINE');
    document.getElementById('ba-lav').addEventListener('click', ()=> window.location.href='Port/login.php?location=BA-LAV');
    document.getElementById('ba-cancel').addEventListener('click', ()=> hideOverlay('ba-overlay'));

    document.getElementById('merah-mine').addEventListener('click', ()=> window.location.href='Port/login.php?location=Merah-MINE');
    document.getElementById('merah-lav').addEventListener('click', ()=> window.location.href='Port/login.php?location=Merah-LAV');
    document.getElementById('merah-cancel').addEventListener('click', ()=> hideOverlay('merah-overlay'));

    // close overlays by tapping outside the dialog
    document.querySelectorAll('.overlay').forEach(o=>{ o.addEventListener('click', (ev)=>{ if(ev.target === o) hideOverlay(o.id); }); });
  </script>
</body>
</html>
